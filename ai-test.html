<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ø®ØªØ¨Ø§Ø± AI ØªÙ„Ù‚Ø§Ø¦ÙŠ - Ø¯ÙƒØªÙˆØ± Ø¯ÙŠÙƒÙˆØ±</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<style>
body{font-family:'Cairo',sans-serif; padding:30px; background:#f9f6f2; text-align:center;color:#333;}
#aiResponse{padding:20px;border-radius:12px;background:white;border-right:6px solid #d9b382;box-shadow:0 5px 15px rgba(0,0,0,0.05);margin-top:20px;line-height:1.8;}
</style>
</head>
<body>

<h2>ğŸ§  Ø§Ø®ØªØ¨Ø§Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</h2>
<p>Ø¬Ø§Ø±Ù ØªØ­Ù„ÙŠÙ„ ØµÙˆØ±Ø© Ø§Ù„ØºØ±ÙØ© Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©...</p>

<div id="aiResponse">Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù„ÙŠÙ„...</div>

<script>
async function runAutoTest() {
  const box = document.getElementById("aiResponse");

  // Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¬Ø§Ù‡Ø²Ø©
  const testImageURL = "https://i.ibb.co/6bPQ0B3/sample-room.jpg"; // ØµÙˆØ±Ø© ØºØ±ÙØ© Ø¬Ø§Ù‡Ø²Ø©
  const img = new Image();

  img.crossOrigin = "anonymous";
  img.src = testImageURL;

  img.onload = async () => {
    // Ø§Ø³ØªØ®Ù„Ø§Øµ Base64
    const canvas = document.createElement('canvas');
    const MAX = 600;
    canvas.width = MAX;
    canvas.height = img.height * (MAX / img.width);
    const ctx = canvas.getContext('2d');
    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

    const base64 = canvas.toDataURL("image/jpeg", 0.7).split(',')[1];

    try {
      const response = await fetch("https://0.bilalmohammedsalem23.workers.dev/", {
        method: "POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({image:base64})
      });

      const data = await response.json();

      box.innerHTML = data.result || "Ù„Ù… ÙŠØªÙ…ÙƒÙ† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…Ù† Ø§Ù„ØªØ­Ù„ÙŠÙ„.";
      confetti({ particleCount:150, spread:70, origin:{ y:0.6 } });

    } catch (err) {
      box.innerHTML = "ğŸŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ØŒ Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ø§Ù‹.";
    }
  };
}

runAutoTest();
</script>

</body>
</html>
