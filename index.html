<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
    // إعدادات مشروعك الخاصة (تم استخراجها من صورتك المرفقة)
    const firebaseConfig = {
        apiKey: "AIzaSyD1TENeV6RkWmrYIjV6seGx84VavsM_tvE",
        authDomain: "shababekcurtain.firebaseapp.com",
        databaseURL: "https://shababekcurtain-default-rtdb.asia-southeast1.firebasedatabase.app/",
        projectId: "shababekcurtain",
        storageBucket: "shababekcurtain.firebasestorage.app",
        messagingSenderId: "413811779922",
        appId: "1:413811779922:web:ace21e11450748eb5fb28b"
    };

    // تشغيل الاتصال
    if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
    }
    const dbRef = firebase.database().ref('products');

    // وظيفة زر حفظ ونشر المنتج المصلحة
    function saveProd() {
        const name = document.getElementById('aName').value;
        const price = document.getElementById('aPrice').value;
        const img = document.getElementById('aImg').value;
        const category = document.getElementById('aCat').value;

        if(!name || !price || !img) {
            alert("يرجى ملء كافة الحقول (الاسم، السعر، ورابط الصورة)");
            return;
        }

        const newProd = {
            id: Date.now(),
            category: category,
            name: name,
            price: price,
            img: img
        };

        // إرسال البيانات للسحابة
        dbRef.push(newProd)
            .then(() => {
                alert("✅ تم حفظ ونشر المنتج بنجاح في السحابة!");
                // تفريغ الحقول بعد الحفظ
                document.getElementById('aName').value = "";
                document.getElementById('aPrice').value = "";
                document.getElementById('aImg').value = "";
                if(typeof showAdminList === 'function') showAdminList();
            })
            .catch((error) => {
                alert("❌ خطأ في الحفظ: " + error.message);
            });
    }
</script>
