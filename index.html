<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>شبابيك للستائر - Shababek Curtains</title>
    <link rel="icon" type="image/png" href="https://i.ibb.co/3y1ZNCk0/1.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root { --gold: #d9b382; --brown: #3d2e24; --bg: #f9f6f2; --white: #ffffff; --whatsapp: #25D366; --red: #ff4d4d; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Cairo', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background: var(--white); color: var(--brown); overflow-x: hidden; scroll-behavior: smooth; line-height: 1.6; }

        .top-banner { background: var(--brown); color: white; padding: 8px 5%; text-align: center; font-size: 13px; display: flex; justify-content: space-between; align-items: center; }
        /* لون واتساب المعتمد في الهيدر */
        .wa-link { color: var(--whatsapp); text-decoration: none; font-weight: bold; display: flex; align-items: center; gap: 5px; }

        header { background: var(--white); padding: 12px 5%; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        /* الضغط في أي مكان على الشعار يعيد للرئيسية */
        .logo-center { flex: 1; display: flex; justify-content: center; cursor: pointer; }
        .logo-img { height: 90px; transition: 0.3s; }
        
        .header-left { flex: 1; display: flex; justify-content: flex-end; align-items: center; gap: 20px; }
        .cart-icon { position: relative; cursor: pointer; font-size: 1.8rem; }
        /* عداد السلة باللون الأحمر */
        .cart-count { position: absolute; top: -5px; right: -10px; background: var(--red); color: white; font-size: 0.8rem; padding: 2px 8px; border-radius: 50%; font-weight: 900; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }

        /* شريط رئيسي قابل للتحريك في الموبايل */
        .nav-bar { background: #fcfcfc; border-bottom: 1px solid #eee; padding: 12px 0; overflow-x: auto; white-space: nowrap; -webkit-overflow-scrolling: touch; display: flex; justify-content: center; }
        .nav-menu { display: inline-flex; gap: 25px; list-style: none; padding: 0 15px; }
        .nav-menu a { text-decoration: none; color: var(--brown); font-weight: 700; cursor: pointer; font-size: 1rem; }

        .page { display: none; width: 100%; animation: fadeIn 0.4s ease; }
        .active { display: block !important; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* تصميم سلة المشتريات الجديد - أبيض وأكبر قليلاً */
        #cartOverlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 2000; justify-content: center; align-items: center; }
        .cart-modal { background: var(--white); width: 90%; max-width: 500px; border-radius: 25px; padding: 30px; box-shadow: 0 20px 50px rgba(0,0,0,0.3); position: relative; }
        .cart-item { display: flex; justify-content: space-between; padding: 15px 0; border-bottom: 1px solid #eee; }

        .hero { height: 65vh; background: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.3)), url('https://i.ibb.co/0R1MK2d7/Gemini-Generated-Image-tnocdatnocdatnoc.png'); background-size: cover; background-position: center; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; color: white; padding: 20px; }
        .hero h1 { font-size: 2.2rem; font-weight: 900; margin-bottom: 25px; text-shadow: 0 2px 10px rgba(0,0,0,0.4); }
        .hero-btns { display: flex; flex-direction: column; gap: 15px; width: 100%; max-width: 320px; margin-bottom: 30px; }
        .btn-gold { background: var(--gold); color: white; border: none; padding: 16px 35px; border-radius: 12px; font-weight: 900; cursor: pointer; font-size: 1.1rem; box-shadow: 0 4px 15px rgba(217,179,130,0.4); }
        .btn-trans { background: transparent; color: white; border: 2px solid white; padding: 16px 35px; border-radius: 12px; font-weight: 900; text-decoration: none; display: flex; align-items: center; justify-content: center; gap: 10px; }

        .catalog-grid { display: flex; overflow-x: auto; gap: 20px; padding: 30px 5%; scrollbar-width: none; }
        .cat-card { flex: 0 0 260px; position: relative; border-radius: 20px; overflow: hidden; height: 350px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); cursor: pointer; }
        .cat-card img { width: 100%; height: 100%; object-fit: cover; }
        .cat-label { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); background: var(--gold); color: white; padding: 10px 25px; border-radius: 12px; font-weight: 900; }

        .features-section { background: var(--bg); padding: 60px 5%; text-align: center; }
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 25px; max-width: 1200px; margin: auto; }
        .f-card { background: white; padding: 35px 20px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }

        .stat-grid { display: flex; flex-direction: column; gap: 20px; margin-top: 40px; }
        @media (min-width: 768px) { 
            .stat-grid { flex-direction: row; justify-content: space-between; }
            .hero h1 { font-size: 3.5rem; }
            .nav-bar { overflow-x: hidden; }
        }
        .stat-card { background: #eee; padding: 30px; border-radius: 15px; text-align: center; }
        .stat-num { font-size: 2.5rem; font-weight: 900; color: var(--gold); display: block; }

        .admin-box { background: #f4f4f4; padding: 25px; border-radius: 20px; margin-bottom: 25px; text-align: right; }
        input, select, textarea { width: 100%; padding: 14px; margin: 8px 0; border-radius: 12px; border: 1px solid #ddd; font-family: 'Cairo'; }

        footer { background: var(--brown); color: white; padding: 60px 5% 30px; text-align: center; }
    </style>
</head>
<body>

    <div class="top-banner">
        <span>أهلاً بكم في شبابيك للستائر - ظل وذوق</span>
        <a href="https://wa.me/9647883002797" class="wa-link"><i class="fab fa-whatsapp"></i> تواصل عبر الواتساب</a>
    </div>

    <header>
        <div style="font-weight:900; line-height:1; flex:1;">شبابيك<br><span style="color:var(--gold); font-size:0.9rem;">للستائر</span></div>
        <div class="logo-center" onclick="showPage('homePage')">
            <img src="https://i.ibb.co/3y1ZNCk0/1.png" class="logo-img" alt="Logo">
        </div>
        <div class="header-left">
            <div class="cart-icon" onclick="toggleCartModal()">
                <i class="fas fa-shopping-basket"></i>
                <span id="globalCartCount" class="cart-count">0</span>
            </div>
        </div>
    </header>

    <div class="nav-bar">
        <ul class="nav-menu">
            <li><a onclick="showPage('homePage')">الرئيسية</a></li>
            <li><a onclick="showPage('doctorPage')">دكتور ديكور</a></li>
            <li><a onclick="showPage('paymentPage')">طرق الدفع</a></li>
            <li><a onclick="showPage('aboutPage')">من نحن</a></li>
            <li><a onclick="showPage('contactPage')">تواصل معنا</a></li>
        </ul>
    </div>

    <div id="cartOverlay">
        <div class="cart-modal">
            <h2 style="margin-bottom:20px; border-bottom:2px solid var(--gold); padding-bottom:10px;">سلة المشتريات</h2>
            <div id="cartItemsList"></div>
            <div style="margin-top:20px; text-align:center;">
                <button class="btn-gold" style="width:100%;" onclick="sendOrder()">تثبيت الطلب عبر واتساب</button>
                <p onclick="toggleCartModal()" style="margin-top:15px; color:#999; cursor:pointer;">إغلاق السلة</p>
            </div>
        </div>
    </div>

    <main id="mainContainer">
        <div id="homePage" class="page active">
            <section class="hero">
                <h1>فخامة التفاصيل تبدأ من شبابيك منزلك</h1>
                <div class="hero-btns">
                    <button onclick="document.getElementById('categories').scrollIntoView()" class="btn-gold">احسب سعر ستائرك الآن</button>
                    <a href="https://wa.me/9647883002797" class="btn-trans"><i class="fab fa-whatsapp"></i> استشارة مجانية</a>
                </div>
                <div style="display:flex; gap:20px; font-size:2rem; margin-top:20px;">
                    <a href="https://www.facebook.com/profile.php?id=61587692021311" target="_blank" style="color:white;"><i class="fab fa-facebook"></i></a>
                    <a href="https://www.instagram.com/shababek.curtains/" target="_blank" style="color:white;"><i class="fab fa-instagram"></i></a>
                    <a href="https://www.tiktok.com/@shababek.curtains" target="_blank" style="color:white;"><i class="fab fa-tiktok"></i></a>
                    <a href="https://youtube.com/@shababek.curtains?si=KKsEbL98N0fq2e2U" target="_blank" style="color:white;"><i class="fab fa-youtube"></i></a>
                    <a href="https://x.com/ShababekCurtain" target="_blank" style="color:white;"><i class="fa-brands fa-x-twitter"></i></a>
                    <a href="https://www.snapchat.com/add/shababekcurtin?share_id=B2Prmbx5_Xo&locale=en-IQ" target="_blank" style="color:white;"><i class="fab fa-snapchat"></i></a>
                </div>
            </section>

            <section id="categories" style="padding: 40px 0;">
                <h2 style="text-align:center; font-weight:900; margin-bottom:10px;">أقسامنا المميزة</h2>
                <div class="catalog-grid">
                    <div class="cat-card" onclick="openCat('بلاك أوت')"><img src="https://i.ibb.co/dsyqws88/curtain-blackout-BDZvwy-X3.jpg"><div class="cat-label">بلاك أوت</div></div>
                    <div class="cat-card" onclick="openCat('شفافة')"><img src="https://i.ibb.co/23ypfxBq/curtain-sheer-B6-H5y-JXx.jpg"><div class="cat-label">شفافة</div></div>
                    <div class="cat-card" onclick="openCat('ديكور')"><img src="https://i.ibb.co/JRd7B9dC/42edce8e89a20200950e110c2d8d41b2.jpg"><div class="cat-label">ديكور</div></div>
                    <div class="cat-card" onclick="openCat('رول')"><img src="https://i.ibb.co/d4GXf0HM/curtain-roller-5c189-CRe.jpg"><div class="cat-label">رول</div></div>
                </div>
            </section>

            <section class="features-section">
                <h2 style="margin-bottom:40px; font-weight:900;">لماذا شبابيك؟</h2>
                <div class="features-grid">
                    <div class="f-card"><i class="fa-solid fa-shield-halved" style="color:var(--gold); font-size:2.5rem; margin-bottom:15px;"></i><h3>ضمان حقيقي</h3><p>أرقى الأقمشة بضمان رسمي.</p></div>
                    <div class="f-card"><i class="fa-solid fa-truck-fast" style="color:var(--gold); font-size:2.5rem; margin-bottom:15px;"></i><h3>قياس منزلي</h3><p>نصلكم للقياس مجاناً.</p></div>
                    <div class="f-card"><i class="fa-solid fa-ruler-combined" style="color:var(--gold); font-size:2.5rem; margin-bottom:15px;"></i><h3>تفصيل دقيق</h3><p>خياطة احترافية حسب الطلب.</p></div>
                    <div class="f-card"><i class="fa-solid fa-palette" style="color:var(--gold); font-size:2.5rem; margin-bottom:15px;"></i><h3>ذوق رفيع</h3><p>أحدث الموديلات العصرية.</p></div>
                </div>
            </section>
        </div>

        <div id="doctorPage" class="page"><div id="doctorContent" style="padding: 40px 5%; max-width: 900px; margin: auto;"></div></div>
        <div id="paymentPage" class="page"><div id="paymentList" style="padding: 40px 5%; max-width: 800px; margin: auto;"></div></div>

        <div id="aboutPage" class="page">
            <div style="padding: 60px 5%; max-width: 1000px; margin: auto;">
                <h2 style="font-weight:900; font-size:2.5rem; margin-bottom:30px;">شبابيك للستائر</h2>
                <p style="font-size:1.2rem; line-height:2; color:#555; text-align:justify;">تأسست شبابيك للستائر بهدف تقديم أفخم وأجود أنواع الستائر المنزلية في العراق. نؤمن بأن الستائر ليست مجرد قطعة قماش، بل هي عنصر أساسي في تصميم المنزل يعكس ذوق أصحابه ويضيف لمسة من الأناقة والفخامة.</p>
                <div class="stat-grid">
                    <div class="stat-card"><span class="stat-num">500+</span><p>عميل سعيد</p></div>
                    <div class="stat-card"><span class="stat-num">50+</span><p>تصميم حصري</p></div>
                    <div class="stat-card"><span class="stat-num">10+</span><p>سنوات خبرة</p></div>
                </div>
            </div>
        </div>

        <div id="adminPanel" class="page">
            <div style="padding: 40px 5%; max-width: 800px; margin: auto; text-align: right;">
                <h2 style="text-align:center; margin-bottom:30px;">لوحة الإدارة السحابية</h2>
                <div class="admin-box">
                    <h3>١. إضافة منتج</h3>
                    <select id="aCat"><option>بلاك أوت</option><option>شفافة</option><option>ديكور</option><option>رول</option></select>
                    <input type="text" id="aName" placeholder="اسم الموديل">
                    <input type="number" id="aPrice" placeholder="السعر لكل متر">
                    <input type="text" id="aImg" placeholder="رابط الصورة">
                    <button onclick="saveItem('products', {category:v('aCat'), name:v('aName'), price:v('aPrice'), img:v('aImg')})" style="background:var(--brown); color:white; padding:12px; border-radius:8px; width:100%; cursor:pointer;">نشر المنتج</button>
                </div>
                <div class="admin-box">
                    <h3>٢. إضافة موضوع لدكتور ديكور</h3>
                    <input type="text" id="dTitle" placeholder="العنوان">
                    <textarea id="dDesc" placeholder="الموضوع أو النصيحة" rows="3"></textarea>
                    <input type="text" id="dMedia" placeholder="رابط صورة أو فيديو mp4">
                    <select id="dType"><option value="img">صورة</option><option value="vid">فيديو</option></select>
                    <button onclick="saveItem('doctor', {title:v('dTitle'), desc:v('dDesc'), media:v('dMedia'), type:v('dType')})" style="background:var(--gold); color:white; padding:12px; border-radius:8px; width:100%; cursor:pointer;">نشر النصيحة</button>
                </div>
                <div class="admin-box">
                    <h3>٣. إضافة طريقة دفع</h3>
                    <input type="text" id="pMethod" placeholder="اسم الطريقة">
                    <input type="text" id="pQR" placeholder="رابط صورة الباركود">
                    <button onclick="saveItem('payments', {name:v('pMethod'), qr:v('pQR')})" style="background:var(--whatsapp); color:white; padding:12px; border-radius:8px; width:100%; cursor:pointer;">حفظ الطريقة</button>
                </div>
            </div>
        </div>

        <div id="categoryView" class="page">
            <h2 id="catTitle" style="text-align:center; padding:40px 0; font-weight:900;"></h2>
            <div id="catGrid" style="display:grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap:15px; padding:0 5%;"></div>
        </div>
        
        <div id="productCalculator" class="page">
            <div style="padding:20px 5%; max-width:600px; margin:auto; text-align:center;">
                <img id="pImg" src="" style="width:100%; border-radius:25px; margin-bottom:20px;">
                <h2 id="pName" style="font-weight:900; margin-bottom:10px;"></h2>
                <div style="color:var(--gold); font-size:1.6rem; font-weight:900; margin-bottom:20px;"><span id="pPrice"></span> د.ع / متر</div>
                <input type="number" id="hIn" placeholder="أدخل الطول بالمتر" style="width:100%; padding:15px; border-radius:12px; border:1px solid #ddd; margin-bottom:20px;">
                <button onclick="addToCart()" class="btn-gold" style="width:100%;">إضافة للسلة</button>
            </div>
        </div>
    </main>

    <footer><div style="font-size:1.8rem; font-weight:900; color:var(--gold); margin-bottom:10px;">شبابيك</div><p>© 2026 جميع الحقوق محفوظة لشبابيك للستائر</p></footer>

    <script>
        const firebaseConfig = { apiKey: "AIzaSyD1TENeV6RkWmrYIjV6seGx84VavsM_tvE", authDomain: "shababekcurtain.firebaseapp.com", databaseURL: "https://shababekcurtain-default-rtdb.asia-southeast1.firebasedatabase.app/", projectId: "shababekcurtain" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        let cur = null, cart = [], adminClicks = 0;

        function v(id) { return document.getElementById(id).value; }
        
        // نظام الدخول والخروج التسلسلي (History API)
        function showPage(id, push = true) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            window.scrollTo(0,0);
            if(push) history.pushState({pageId: id}, null, "");
        }
        window.onpopstate = e => showPage(e.state ? e.state.pageId : 'homePage', false);

        // احتفالية قوية
        function fireConfetti() {
            const duration = 3 * 1000;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 3000 };
            const interval = setInterval(function() {
                const timeLeft = animationEnd - Date.now();
                if (timeLeft <= 0) return clearInterval(interval);
                const particleCount = 50 * (timeLeft / duration);
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: Math.random(), y: Math.random() - 0.2 } }));
            }, 250);
        }

        function addToCart() {
            const h = v('hIn');
            if(!h || h === "0") return alert("أدخل الطول");
            const total = Math.round(h * cur.price).toLocaleString();
            cart.push({n: cur.name, p: total});
            document.getElementById('globalCartCount').innerText = cart.length;
            fireConfetti();
            alert("تمت الإضافة بنجاح!");
        }

        function toggleCartModal() {
            const overlay = document.getElementById('cartOverlay');
            overlay.style.display = overlay.style.display === 'flex' ? 'none' : 'flex';
            renderCartItems();
        }

        function renderCartItems() {
            const list = document.getElementById('cartItemsList');
            list.innerHTML = cart.map(i => `<div class="cart-item"><span>${i.n}</span><b>${i.p} د.ع</b></div>`).join('');
            if(cart.length === 0) list.innerHTML = "<p style='text-align:center;'>السلة فارغة</p>";
        }

        function sendOrder() {
            if(cart.length === 0) return alert("السلة فارغة");
            let msg = "طلب جديد من شبابيك:\n";
            cart.forEach(i => msg += `- ${i.n}: ${i.p}د.ع\n`);
            window.location.href = `https://wa.me/9647883002797?text=${encodeURIComponent(msg)}`;
            // تصفير السلة وعدادها عند الإرسال
            cart = [];
            document.getElementById('globalCartCount').innerText = "0";
            toggleCartModal();
            fireConfetti();
        }

        function saveItem(ref, obj) { db.ref(ref).push(obj).then(() => { alert("تم الحفظ!"); location.reload(); }); }
        
        document.querySelector('.logo-img').onclick = () => {
            adminClicks++;
            if(adminClicks >= 5) { if(prompt("الرمز")==="1234") showPage('adminPanel'); adminClicks = 0; }
        };

        function openCat(n) { db.ref('products').once('value', snap => { const items = Object.values(snap.val() || {}).filter(i => i.category === n); renderGrid('ستائر ' + n, items); }); }
        function renderGrid(t, i) { document.getElementById('catTitle').innerText = t; document.getElementById('catGrid').innerHTML = i.map(x => `<div style="background:white; border-radius:20px; overflow:hidden; box-shadow:0 8px 15px rgba(0,0,0,0.05);" onclick='openCalc(${JSON.stringify(x)})'><img src="${x.img}" style="width:100%; height:250px; object-fit:cover;"><div style="padding:15px; text-align:center;"><h3>${x.name}</h3><p style="color:var(--gold); font-weight:900;">${parseInt(x.price).toLocaleString()} د.ع / م</p></div></div>`).join(''); showPage('categoryView'); }
        function openCalc(p) { cur = p; document.getElementById('pName').innerText = p.name; document.getElementById('pPrice').innerText = parseInt(p.price).toLocaleString(); document.getElementById('pImg').src = p.img; document.getElementById('hIn').value = ""; showPage('productCalculator'); }

        db.ref('doctor').on('value', snap => { const d = snap.val(); document.getElementById('doctorContent').innerHTML = d ? Object.values(d).map(i => `<div style="background:white; border-radius:25px; overflow:hidden; margin-bottom:30px; box-shadow:0 10px 30px rgba(0,0,0,0.05); border-right:6px solid var(--gold); padding:25px;">${i.type === 'vid' ? `<video src="${i.media}" autoplay muted loop style="width:100%; border-radius:15px;"></video>` : `<img src="${i.media}" style="width:100%; border-radius:15px;">`}<h3>${i.title}</h3><p>${i.desc}</p></div>`).join('') : ''; });
        db.ref('payments').on('value', snap => { const p = snap.val(); document.getElementById('paymentList').innerHTML = p ? Object.values(p).map(i => `<div style="background:white; padding:30px; border-radius:20px; margin-bottom:15px; text-align:center; border:1px solid #eee;"><h3>${i.name}</h3><img src="${i.qr}" style="width:220px; margin-top:15px; border-radius:10px;"></div>`).join('') : ''; });
    </script>
</body>
</html>
