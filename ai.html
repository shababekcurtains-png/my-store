<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¯ÙƒØªÙˆØ± Ø¯ÙŠÙƒÙˆØ± - Ø´Ø¨Ø§Ø¨ÙŠÙƒ Ù„Ù„Ø³ØªØ§Ø¦Ø±</title>

<style>
body {
  font-family: Cairo, sans-serif;
  background: #ffffff;
  color: #3d2e24;
  text-align: center;
  padding: 40px;
}

#aiResponse {
  margin: 25px auto;
  padding: 25px;
  border-radius: 20px;
  border: 2px solid #d9b382;
  max-width: 600px;
  text-align: right;
  min-height: 120px;
}

button {
  background: #d9b382;
  color: white;
  padding: 15px 35px;
  border: none;
  border-radius: 10px;
  font-size: 18px;
  cursor: pointer;
}
</style>
</head>

<body>

<h1>ğŸªŸ Ø¯ÙƒØªÙˆØ± Ø¯ÙŠÙƒÙˆØ± - Ø´Ø¨Ø§Ø¨ÙŠÙƒ Ù„Ù„Ø³ØªØ§Ø¦Ø±</h1>

<div id="aiResponse">
Ø§Ù„ØªÙ‚Ø· ØµÙˆØ±Ø© Ù„ØºØ±ÙØªÙƒ ÙˆØ³Ø£Ù‚ØªØ±Ø­ Ù„Ùƒ Ø§Ù„Ø³ØªØ§Ø±Ø© Ø§Ù„Ù…Ø«Ø§Ù„ÙŠØ© âœ¨
</div>

<input type="file" id="imageInput" accept="image/*" style="display:none;">
<button onclick="document.getElementById('imageInput').click()">
ğŸ“· Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„ØºØ±ÙØ©
</button>

<script>
const workerUrl = "https://0.bilalmohammedsalem23.workers.dev/";

document.getElementById("imageInput").addEventListener("change", async function () {
  const file = this.files[0];
  if (!file) return;

  const box = document.getElementById("aiResponse");
  box.innerHTML = "â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„...";

  const reader = new FileReader();
  reader.readAsDataURL(file);

  reader.onload = async function () {

    // ğŸ”¹ Ø¶ØºØ· Ø§Ù„ØµÙˆØ±Ø© Ù„ØªØ¬Ù†Ø¨ ÙƒØ³Ø± JSON
    let base64 = reader.result.split(",")[1];

    if (base64.length > 500000) {
      base64 = base64.substring(0, 500000);
    }

    try {
      const response = await fetch(workerUrl, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ image: base64 })
      });

      const data = await response.json();
      box.innerHTML = data.reply;

    } catch (error) {
      box.innerHTML = "âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù….";
      console.error(error);
    }
  };
});
</script>

</body>
</html>
