<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¯ÙƒØªÙˆØ± Ø¯ÙŠÙƒÙˆØ± - Ø´Ø¨Ø§Ø¨ÙŠÙƒ Ù„Ù„Ø³ØªØ§Ø¦Ø±</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; padding: 20px; background:#f9f6f2; }
  .chat-bubble { background:white; padding:20px; border-radius:20px; border-right:5px solid #d9b382; margin:20px auto; max-width:500px; }
  .btn-gold { background:#d9b382; color:white; padding:15px 30px; border:none; border-radius:12px; cursor:pointer; font-weight:bold; }
</style>
</head>
<body>

<h2>Ø¯ÙƒØªÙˆØ± Ø¯ÙŠÙƒÙˆØ±</h2>
<div class="chat-bubble" id="aiResponse">Ø£Ù‡Ù„Ø§Ù‹! Ø§Ù„ØªÙ‚Ø· ØµÙˆØ±Ø© Ù„ØºØ±ÙØªÙƒ Ù„ØªÙ„Ù‚ÙŠ Ø§Ù‚ØªØ±Ø§Ø­ Ø§Ù„Ø³ØªØ§Ø¦Ø±.</div>
<input type="file" id="aiCamera" accept="image/*" capture="environment" style="display:none" onchange="analyzeRoom(this)">
<br>
<button class="btn-gold" onclick="document.getElementById('aiCamera').click()">ğŸ“¸ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø©</button>

<script>
async function analyzeRoom(input) {
  if (!input.files || !input.files[0]) return;
  const box = document.getElementById('aiResponse');
  box.innerHTML = "â³ Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØºØ±ÙØ©...";
  const reader = new FileReader();
  reader.readAsDataURL(input.files[0]);
  reader.onload = async (e) => {
    try {
      const base64Data = e.target.result.split(',')[1];
      const response = await fetch("https://0.bilalmohammedsalem23.workers.dev/", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ image: base64Data })
      });
      const data = await response.json();
      box.innerHTML = data.reply;
    } catch (err) {
      box.innerHTML = "âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„: " + err.message;
    }
  };
}
</script>

</body>
</html>
